<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc on Fri May 02 07:29:23 JST 2003 -->
<TITLE>
Noodle 2.2.0 API: Class  CharacterNoodleReader
</TITLE>
<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">
</HEAD>
<BODY BGCOLOR="white">

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_top"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/CharacterNoodleReader.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/tigris/noodle/ByteNoodleReader.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/tigris/noodle/FilterSet.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CharacterNoodleReader.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.tigris.noodle</FONT>
<BR>
Class  CharacterNoodleReader</H2>
<PRE>
java.lang.Object
  |
  +--<B>org.tigris.noodle.CharacterNoodleReader</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../org/tigris/noodle/NoodleReader.html">NoodleReader</A></DD>
</DL>
<HR>
<DL>
<DT>public class <B>CharacterNoodleReader</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../org/tigris/noodle/NoodleReader.html">NoodleReader</A></DL>

<P>
CharacterNoodleReader implements the NoodleReader interface; it makes
 an effort to read in the response using characters rather than bytes.
 In determining the charset to use, it will give preference to the
 HTTP Content-Type header; but it will also look for a META tag
 if the Content-Type header doesn't specify the charset.

 Normally this is only called for text/html files -- for other kinds
 of files we don't want to do this kind of operation, as we'd rather
 just pass the bytes along unchanged: character encoding transformations
 always have the potential to lose data.
<P>
<DL>
<DT><B>Author: </B><DD><a href="mailto:edk@collab.net">Ed Korthof</a></DD>
</DL>
<HR>

<P>
<!-- ======== INNER CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#ASCII_OK_CHARACTERS">ASCII_OK_CHARACTERS</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sometimes we will need to search for character boundaries when we
 don't know the encoding of the byte stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#BUFFER_SIZE">BUFFER_SIZE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Buffer size.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;char[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#buffer1">buffer1</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Private buffer used to hold data which has been read.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;char[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#buffer2">buffer2</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Private buffer used to hold data which has been read.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#CONTENT_TYPE_CHARSET_MARKER">CONTENT_TYPE_CHARSET_MARKER</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The string used to search through the HTTP content type for the
 charset</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../org/tigris/noodle/NoodleData.html">NoodleData</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#data">data</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The NoodleData with which we are associated</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.io.Reader</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#input">input</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The input stream</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#inputCharset">inputCharset</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is the charset which we are using to read data.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;char[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#lookaheadBlock">lookaheadBlock</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The next block of data to be filtered.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#lookaheadBlockSize">lookaheadBlockSize</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The number of characters in the lookahead block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#outputCharsetOverride">outputCharsetOverride</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This overrides the charset which we'll use for output.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#readComplete">readComplete</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Whether the read from the proxy stream is complete.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#requiredConsecutiveASCIIBytes">requiredConsecutiveASCIIBytes</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is the number of consecutive simple ASCII bytes which are required
 for the assumption that the current byte isn't in the middle of a 
 character.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#CharacterNoodleReader(org.tigris.noodle.NoodleData)">CharacterNoodleReader</A></B>(<A HREF="../../../org/tigris/noodle/NoodleData.html">NoodleData</A>&nbsp;data)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../org/tigris/noodle/ResponseBlock.html">ResponseBlock</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#doRead()">doRead</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ask for the next block.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#fillBlock(char[])">fillBlock</A></B>(char[]&nbsp;charBlock)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reads from the proxy resposne until EOF or until the given buffer
 is full.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#findCharsetViaMeta(byte[], int)">findCharsetViaMeta</A></B>(byte[]&nbsp;buffer,
                   int&nbsp;totalRead)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This and the following method would be better done through a library
 which properly parses for HTML tags, and then parses the tags into
 data structures.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#getCharset()">getCharset</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#getCharsetFromMeta(java.lang.String)">getCharsetFromMeta</A></B>(java.lang.String&nbsp;meta)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#getHeadData(java.io.InputStream)">getHeadData</A></B>(java.io.InputStream&nbsp;input)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is kind of a hack, but it seems necessary due to the fact that
 we can't reset back to a mark with the input stream which we have.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>private &nbsp;java.io.Reader</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#getReader()">getReader</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../org/tigris/noodle/CharacterNoodleReader.html#readComplete()">readComplete</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ask if there is another block to be read.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><clinit>, clone, equals, finalize, getClass, hashCode, notify, notifyAll, registerNatives, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="BUFFER_SIZE"><!-- --></A><H3>
BUFFER_SIZE</H3>
<PRE>
private static final int <B>BUFFER_SIZE</B></PRE>
<DL>
<DD>Buffer size.</DL>
<HR>

<A NAME="inputCharset"><!-- --></A><H3>
inputCharset</H3>
<PRE>
private java.lang.String <B>inputCharset</B></PRE>
<DL>
<DD>This is the charset which we are using to read data.</DL>
<HR>

<A NAME="CONTENT_TYPE_CHARSET_MARKER"><!-- --></A><H3>
CONTENT_TYPE_CHARSET_MARKER</H3>
<PRE>
private static final java.lang.String <B>CONTENT_TYPE_CHARSET_MARKER</B></PRE>
<DL>
<DD>The string used to search through the HTTP content type for the
 charset</DL>
<HR>

<A NAME="input"><!-- --></A><H3>
input</H3>
<PRE>
private java.io.Reader <B>input</B></PRE>
<DL>
<DD>The input stream</DL>
<HR>

<A NAME="lookaheadBlock"><!-- --></A><H3>
lookaheadBlock</H3>
<PRE>
private char[] <B>lookaheadBlock</B></PRE>
<DL>
<DD>The next block of data to be filtered. A pointer to one of
 the two buffers. Not accessible from outside CharacterReader.</DL>
<HR>

<A NAME="lookaheadBlockSize"><!-- --></A><H3>
lookaheadBlockSize</H3>
<PRE>
private int <B>lookaheadBlockSize</B></PRE>
<DL>
<DD>The number of characters in the lookahead block.</DL>
<HR>

<A NAME="readComplete"><!-- --></A><H3>
readComplete</H3>
<PRE>
private boolean <B>readComplete</B></PRE>
<DL>
<DD>Whether the read from the proxy stream is complete.</DL>
<HR>

<A NAME="buffer1"><!-- --></A><H3>
buffer1</H3>
<PRE>
private char[] <B>buffer1</B></PRE>
<DL>
<DD>Private buffer used to hold data which has been read.</DL>
<HR>

<A NAME="buffer2"><!-- --></A><H3>
buffer2</H3>
<PRE>
private char[] <B>buffer2</B></PRE>
<DL>
<DD>Private buffer used to hold data which has been read.</DL>
<HR>

<A NAME="ASCII_OK_CHARACTERS"><!-- --></A><H3>
ASCII_OK_CHARACTERS</H3>
<PRE>
protected java.lang.String <B>ASCII_OK_CHARACTERS</B></PRE>
<DL>
<DD>Sometimes we will need to search for character boundaries when we
 don't know the encoding of the byte stream.  As a simplification, we
 assume that a sequence of a subset of ASCII is not so likely to include
 the last byte of a multibyte character -- at least when we test for
 isWhiteSpace + isLetterOrDigit + a few other chararacters.  Of course,
 this isn't perfect, but in many cases it will work.  The following
 characters are the additional characters that we test for ... the
 intent of this is stop reading the first time we hit an HTML tag.</DL>
<HR>

<A NAME="requiredConsecutiveASCIIBytes"><!-- --></A><H3>
requiredConsecutiveASCIIBytes</H3>
<PRE>
protected int <B>requiredConsecutiveASCIIBytes</B></PRE>
<DL>
<DD>This is the number of consecutive simple ASCII bytes which are required
 for the assumption that the current byte isn't in the middle of a 
 character.  (Clearly one isn't enough, as many encodings allow for the
 second byte of a multibyte character to be any printable ASCII value.)</DL>
<HR>

<A NAME="data"><!-- --></A><H3>
data</H3>
<PRE>
protected <A HREF="../../../org/tigris/noodle/NoodleData.html">NoodleData</A> <B>data</B></PRE>
<DL>
<DD>The NoodleData with which we are associated</DL>
<HR>

<A NAME="outputCharsetOverride"><!-- --></A><H3>
outputCharsetOverride</H3>
<PRE>
protected java.lang.String <B>outputCharsetOverride</B></PRE>
<DL>
<DD>This overrides the charset which we'll use for output.  We use it
 when we need to override because we weren't able to guess the original
 encoding.</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="CharacterNoodleReader(org.tigris.noodle.NoodleData)"><!-- --></A><H3>
CharacterNoodleReader</H3>
<PRE>
public <B>CharacterNoodleReader</B>(<A HREF="../../../org/tigris/noodle/NoodleData.html">NoodleData</A>&nbsp;data)
                      throws <A HREF="../../../org/tigris/noodle/NoodleException.html">NoodleException</A></PRE>
<DL>
<DD>Constructor.</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" CELLPADDING="3" CELLSPACING="0" WIDTH="100%">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="getCharset()"><!-- --></A><H3>
getCharset</H3>
<PRE>
public java.lang.String <B>getCharset</B>()</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getReader()"><!-- --></A><H3>
getReader</H3>
<PRE>
private java.io.Reader <B>getReader</B>()
                          throws <A HREF="../../../org/tigris/noodle/NoodleException.html">NoodleException</A></PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getHeadData(java.io.InputStream)"><!-- --></A><H3>
getHeadData</H3>
<PRE>
private byte[] <B>getHeadData</B>(java.io.InputStream&nbsp;input)
                    throws java.io.IOException</PRE>
<DL>
<DD>This is kind of a hack, but it seems necessary due to the fact that
 we can't reset back to a mark with the input stream which we have.<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="findCharsetViaMeta(byte[], int)"><!-- --></A><H3>
findCharsetViaMeta</H3>
<PRE>
private java.lang.String <B>findCharsetViaMeta</B>(byte[]&nbsp;buffer,
                                            int&nbsp;totalRead)</PRE>
<DL>
<DD>This and the following method would be better done through a library
 which properly parses for HTML tags, and then parses the tags into
 data structures.  But we don't have a complete HTML file -- this is
 generally just a fragment, and many tags won't be well-formed.<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getCharsetFromMeta(java.lang.String)"><!-- --></A><H3>
getCharsetFromMeta</H3>
<PRE>
private java.lang.String <B>getCharsetFromMeta</B>(java.lang.String&nbsp;meta)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="fillBlock(char[])"><!-- --></A><H3>
fillBlock</H3>
<PRE>
public int <B>fillBlock</B>(char[]&nbsp;charBlock)
              throws <A HREF="../../../org/tigris/noodle/NoodleException.html">NoodleException</A></PRE>
<DL>
<DD>Reads from the proxy resposne until EOF or until the given buffer
 is full.  Impl moved from NoodleData.<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="readComplete()"><!-- --></A><H3>
readComplete</H3>
<PRE>
public boolean <B>readComplete</B>()</PRE>
<DL>
<DD>Ask if there is another block to be read.<DD><DL>
<DT><B>Specified by: </B><DD><CODE><A HREF="../../../org/tigris/noodle/NoodleReader.html#readComplete()">readComplete</A></CODE> in interface <CODE><A HREF="../../../org/tigris/noodle/NoodleReader.html">NoodleReader</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="doRead()"><!-- --></A><H3>
doRead</H3>
<PRE>
public <A HREF="../../../org/tigris/noodle/ResponseBlock.html">ResponseBlock</A> <B>doRead</B>()
                     throws <A HREF="../../../org/tigris/noodle/NoodleException.html">NoodleException</A></PRE>
<DL>
<DD>Ask for the next block.

 Swaps the old lookahead block for the new current block and
 reads new data into the lookahead block until it's is full or
 we reach EOF. Also handles block initialization.<DD><DL>
<DT><B>Specified by: </B><DD><CODE><A HREF="../../../org/tigris/noodle/NoodleReader.html#doRead()">doRead</A></CODE> in interface <CODE><A HREF="../../../org/tigris/noodle/NoodleReader.html">NoodleReader</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>

<!-- ========== START OF NAVBAR ========== -->
<A NAME="navbar_bottom"><!-- --></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/CharacterNoodleReader.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../org/tigris/noodle/ByteNoodleReader.html"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../org/tigris/noodle/FilterSet.html"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" TARGET="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="CharacterNoodleReader.html" TARGET="_top"><B>NO FRAMES</B></A></FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY: &nbsp;INNER&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL: &nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<!-- =========== END OF NAVBAR =========== -->

<HR>
Copyright © 2003 Tigris.org. All Rights Reserved.
</BODY>
</HTML>
